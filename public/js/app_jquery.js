(()=>{function e(){var e=document.getElementById("dashboard_create_thread_form"),a=e.dashboard_create_thread_text.value,t=e.dashboard_thread_category_select.value;e.dashboard_create_thread_text.value="",""!=a&&""!=t&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:url+"/jQuery.ajax/create_thread",data:{thread_name:a,thread_category:t}}).done((function(){window.location.reload()})).fail((function(e,a,t){console.log(e.status),console.log(a),console.log(t.message)})))}$("#dashboard_create_thread_btn").click(e),$("#dashboard_create_thread_text").keydown((function(a){13===a.keyCode&&e()}))})(),(()=>{function e(){var e,a,t,r=document.getElementById("dashboard_displayArea");$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:url+"/jQuery.ajax/getRow",dataType:"json",data:{thread_id,max_message_id}}).done((function(d){for(var s in d)e=d[s].user.name,a=d[s].message,t="<a id='thread_message_id_"+d[s].message_id+"' href='#dashboard_send_comment_label' type='button' onClick='reply("+d[s].message_id+")'>"+d[s].message_id+"</a>: "+e+" "+d[s].created_at+"<br><p style='overflow-wrap: break-word;'>"+a+"</p>",null!==d[s].thread_image_path&&(t+="<p><img src='"+url+d[s].thread_image_path.img_path.replace("public","/storage")+"'></p>"),t+="<br><button id='js_dashboard_Get_allRow_button_"+d[s].message_id+"' type='button' ",0===d[s].likes.length?t+="class='btn btn-light' onClick='likes("+d[s].message_id+", 0)'>":t+="class='btn btn-dark' onClick='likes("+d[s].message_id+", 1)'>",t+="like</button> <dev id='js_dashboard_Get_allRow_dev_"+d[s].message_id+"'>"+d[s].likes_count+"</dev><hr>",r.insertAdjacentHTML("afterbegin",t),max_message_id=d[s].message_id})).fail((function(e,a,t){console.log(e.status),console.log(a),console.log(t.message)}))}1===show_thread_messages_flag&&(show_thread_messages_flag=0,e(),setInterval(e,1e3))})(),$("#dashboard_send_comment_replay_clear").click((function(){$("#dashboard_send_comment_reply_disabled_text").val(""),$("#dashboard_send_comment_reply_source").attr("href","#!")})),(()=>{function e(){var e=$("#dashboard_threads_search_thread").val(),a=$("#dashboard_threads_primary_category_select").val(),t=$("#dashboard_threads_secondary_category_select").val();""!=e?$("#dashboard_threads_threads_table tbody tr").each((function(){var r=$(this).find("td:eq(0)").html(),d=$(this).find("td:eq(3)").html(),s=$(this).find("td:eq(4)").html();null!=r.match(e)?t==d?$(this).show():""!=t||""!=a&&a!=s?$("#dashboard_threads_threads_table tr").hide():$(this).show():$(this).hide()})):$("#dashboard_threads_threads_table tr").show()}$("#dashboard_threads_search_thread").keyup(e),$("#dashboard_threads_show_all_threads_button").click((function(){$("#dashboard_threads_primary_category_select").val(""),$("#dashboard_threads_secondary_category_select").val(""),$("#dashboard_threads_search_thread").val(""),$("#dashboard_threads_threads_table tr").show()})),$("#dashboard_threads_primary_category_select").change((function(){var a=$(this).val();e(),$("#dashboard_threads_secondary_category_select").find("option").each((function(){var e=$(this).data("val");""==a||a==e?$(this).show():$(this).hide()})),$("#dashboard_threads_secondary_category_select").val("")})),$("#dashboard_threads_secondary_category_select").change(e)})(),(()=>{function e(){var e=document.getElementById("dashboard_sendMessage_form"),a=e.dashboard_message_textarea.value,t=e.dashboard_send_comment_reply_disabled_text.value,r=new FormData;r.append("thread_id",thread_id),r.append("message",a),r.append("reply",t),r.append("img",$("#dashboard_send_comment_upload_img").prop("files")[0]),0==a.trim()?dashboard_sendAlertArea.innerHTML="<div class='alert alert-danger'>書き込みなし・空白・改行のみの投稿は出来ません</div>":a.rows()>20?dashboard_sendAlertArea.innerHTML="<div class='alert alert-danger'>入力は20行以内にして下さい</div>":a.bytes()>300?dashboard_sendAlertArea.innerHTML="<div class='alert alert-danger'>入力は100文字(英数字は 300文字)以内にして下さい</div>":($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:url+"/jQuery.ajax/sendRow",data:r,processData:!1,contentType:!1}).done((function(){})).fail((function(e,a,t){console.log(e.status),console.log(a),console.log(t.message)})),dashboard_sendAlertArea.innerHTML="",e.dashboard_message_textarea.value="",$("#dashboard_send_commnet_img_preview").attr("src",""),$("#dashboard_send_comment_upload_img").val(""),$("#dashboard_send_comment_reply_disabled_text").val(""),$("#dashboard_send_comment_reply_source").attr("href","#!"))}$("#dashboard_sendMessage_btn").click(e),$("#dashboard_message_textarea").keydown((function(a){event.ctrlKey&&13===a.keyCode&&e()})),String.prototype.bytes=function(){return encodeURIComponent(this).replace(/%../g,"x").length},String.prototype.rows=function(){return this.match(/\n/g)?this.match(/\n/g).length+1:1},$("#dashboard_send_comment_upload_img").change((function(e){var a=$(this).val();if(""!==a&&e.target.files[0].type.indexOf("image")<0)return dashboard_sendAlertArea.innerHTML="<div class='alert alert-danger'>画像ファイルを指定してください</div>",$("#dashboard_send_commnet_img_preview").attr("src",""),$(this).val(""),!1;if(function(e){var a=$("#"+e).prop("files")[0];if(a)return 3145728<=a.size}("dashboard_send_comment_upload_img"))return dashboard_sendAlertArea.innerHTML="<div class='alert alert-danger'>ファイルのサイズは3MB以内にしてください</div>",$("#dashboard_send_commnet_img_preview").attr("src",""),$(this).val(""),!1;if(dashboard_sendAlertArea.innerHTML="",""===a)$("#dashboard_send_commnet_img_preview").attr("src","");else{var t=new FileReader;t.onload=function(e){$("#dashboard_send_commnet_img_preview").attr("src",e.target.result)},t.readAsDataURL(e.target.files[0])}}))})(),$("#mypage_page_theme_select").change((function(){var e=$("option:selected").val();if("default"==e)e=1;else{if("dark"!=e)return;e=2}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:url+"/jQuery.ajax/page_theme",data:{page_theme:e}}).done((function(){window.location.reload()})).fail((function(e,a,t){console.log(e.status),console.log(a),console.log(t.message)}))})),(()=>{function e(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({type:"POST",url:"/report/store",data:$("#report_form_form").serializeArray()}).done((function(e){$('div[name="radio_1_error"]').html(""),$('div[name="textarea_error"]').html(""),void 0!==e.errors?(void 0!==e.errors.radio_1&&$('div[name="radio_1_error"]').html('<div class="alert alert-danger">'+e.errors.radio_1[0]+"</div>"),void 0!==e.errors.report_form_textarea&&$('div[name="textarea_error"]').html('<div class="alert alert-danger">'+e.errors.report_form_textarea[0]+"</div>")):($('input:radio[name="radio_1"]').prop("checked",!1),$("#report_form_textarea").val(""))})).fail((function(e,a,t){console.log(e.status),console.log(a),console.log(t.message)}))}$("#report_form_btn").click(e),$("#report_form_textarea").keydown((function(a){13===a.keyCode&&e()}))})();